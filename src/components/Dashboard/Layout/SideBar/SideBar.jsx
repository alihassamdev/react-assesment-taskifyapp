import React from "react";
import "./SideBar.css";
import { Link, NavLink, useNavigate } from "react-router";

const SideBar = ({ user, isOpen, onClose, onLogout }) => {
    const navigate = useNavigate();

    // Handle Logout User
    const handleLogout = () => {
        localStorage.removeItem('token');
        localStorage.removeItem('user');
        if (onLogout) onLogout();
        navigate('/signin');
    };

    return (
        <aside className={`sidebar ${isOpen ? "sidebar-open" : ""}`}>
            <div>
                <div className="profile">
                    <h2>{user.firstName} {user.lastName}</h2>
                    <p>{user.email}</p>
                </div>
                <nav>
                    <NavLink to='/dashboard' end className={({ isActive }) => `nav-link ${isActive ? 'active-link' : ''}`} >
                        <span className="icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.4241 8V0H23.4771V8H13.4241ZM0.85791 13.3333V0H10.9109V13.3333H0.85791ZM13.4241 24V10.6667H23.4771V24H13.4241ZM0.85791 24V16H10.9109V24H0.85791Z" />
                            </svg>
                        </span> Dashboard
                    </NavLink >
                    <NavLink to='/dashboard/vital-task' end className={({ isActive }) => `nav-link ${isActive ? 'active-link' : ''}`}>
                        <span className="icon">
                            <svg width="8" height="20" viewBox="0 0 8 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4.04952 0C3.08093 0 2.15202 0.408258 1.46712 1.13496C0.78223 1.86166 0.397461 2.84729 0.397461 3.875C0.397461 6.795 1.53502 10.427 2.10615 12.074C2.25378 12.4942 2.51958 12.8561 2.86754 13.1106C3.21549 13.3651 3.62878 13.5 4.0514 13.497C4.90339 13.497 5.69035 12.955 5.99571 12.079C6.56684 10.439 7.70157 6.825 7.70157 3.875C7.70157 2.84729 7.3168 1.86166 6.63191 1.13496C5.94702 0.408258 5.0181 0 4.04952 0ZM4.05046 14.998C3.42531 14.998 2.82578 15.2615 2.38373 15.7305C1.94169 16.1996 1.69335 16.8357 1.69335 17.499C1.69335 18.1623 1.94169 18.7984 2.38373 19.2675C2.82578 19.7365 3.42531 20 4.05046 20C4.6756 20 5.27514 19.7365 5.71718 19.2675C6.15923 18.7984 6.40756 18.1623 6.40756 17.499C6.40756 16.8357 6.15923 16.1996 5.71718 15.7305C5.27514 15.2615 4.6756 14.998 4.05046 14.998Z" fill="white" />
                            </svg>
                        </span> Vital Task
                    </NavLink>
                    <NavLink to='/dashboard/my-task' end className={({ isActive }) => `nav-link ${isActive ? 'active-link' : ''}`}>
                        <span className="icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.57048 22H18.765C19.8045 22 20.6499 21.103 20.6499 20V5C20.6499 3.897 19.8045 3 18.765 3H16.8801C16.8801 2.73478 16.7808 2.48043 16.604 2.29289C16.4273 2.10536 16.1876 2 15.9376 2H8.39788C8.14792 2 7.9082 2.10536 7.73145 2.29289C7.55471 2.48043 7.45541 2.73478 7.45541 3H5.57048C4.53094 3 3.68555 3.897 3.68555 5V20C3.68555 21.103 4.53094 22 5.57048 22ZM5.57048 5H7.45541V7H16.8801V5H18.765V20H5.57048V5Z" fill="white" />
                                <path d="M11.2251 13.586L9.53528 11.793L8.20264 13.207L11.2251 16.414L16.1325 11.207L14.7999 9.79297L11.2251 13.586Z" fill="white" />
                            </svg>
                        </span> My Task
                    </NavLink>
                    <NavLink className="nav-link">
                        <span className="icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.9558 19.7143H23.4771V21.4286H9.9558V19.7143ZM3.35935 20.5714L0.867568 22.7829L2.22935 24L6.09258 20.5714L2.22935 17.1429L0.85791 18.3514L3.35935 20.5714ZM9.9558 11.1429H23.4771V12.8571H9.9558V11.1429ZM3.35935 12L0.867568 14.2114L2.22935 15.4286L6.09258 12L2.22935 8.57143L0.85791 9.78L3.35935 12ZM9.9558 2.57143H23.4771V4.28571H9.9558V2.57143ZM3.35935 3.42857L0.867568 5.64L2.22935 6.85714L6.09258 3.42857L2.22935 0L0.85791 1.20857L3.35935 3.42857Z" fill="white" />
                        </svg>
                        </span> Task Categories
                    </NavLink>
                    <NavLink to='/dashboard/setting' end className={({ isActive }) => `nav-link ${isActive ? 'active-link' : ''}`}>
                        <span className="icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.07284 24L8.6227 20.16C8.37888 20.06 8.14894 19.94 7.93288 19.8C7.71681 19.66 7.506 19.51 7.30044 19.35L3.95257 20.85L0.85791 15.15L3.75564 12.81C3.73689 12.67 3.72751 12.5348 3.72751 12.4044V11.5956C3.72751 11.4652 3.73689 11.33 3.75564 11.19L0.85791 8.85L3.95257 3.15L7.30044 4.65C7.50675 4.49 7.72244 4.34 7.9475 4.2C8.17257 4.06 8.39764 3.94 8.6227 3.84L9.07284 0H15.2622L15.7123 3.84C15.9561 3.94 16.1861 4.06 16.4021 4.2C16.6182 4.34 16.829 4.49 17.0346 4.65L20.3824 3.15L23.4771 8.85L20.5794 11.19C20.5981 11.33 20.6075 11.4652 20.6075 11.5956V12.4044C20.6075 12.5348 20.5887 12.67 20.5512 12.81L23.449 15.15L20.3543 20.85L17.0346 19.35C16.8283 19.51 16.6126 19.66 16.3875 19.8C16.1624 19.94 15.9374 20.06 15.7123 20.16L15.2622 24H9.07284ZM12.2238 16.2C13.3116 16.2 14.24 15.79 15.009 14.97C15.7779 14.15 16.1624 13.16 16.1624 12C16.1624 10.84 15.7779 9.85 15.009 9.03C14.24 8.21 13.3116 7.8 12.2238 7.8C11.1172 7.8 10.1839 8.21 9.42394 9.03C8.66397 9.85 8.28435 10.84 8.2851 12C8.2851 13.16 8.66472 14.15 9.42394 14.97C10.1832 15.79 11.1164 16.2 12.2238 16.2Z" fill="white" />
                        </svg>
                        </span> Settings
                    </NavLink>
                    <NavLink className="nav-link" >
                        <span className="icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.1109 19.2C12.5068 19.2 12.8415 19.0548 13.1152 18.7644C13.3889 18.474 13.5254 18.1192 13.5246 17.7C13.5246 17.28 13.3882 16.9248 13.1152 16.6344C12.8423 16.344 12.5075 16.1992 12.1109 16.2C11.7151 16.2 11.3807 16.3452 11.1078 16.6356C10.8349 16.926 10.698 17.2808 10.6973 17.7C10.6973 18.12 10.8341 18.4752 11.1078 18.7656C11.3815 19.056 11.7159 19.2008 12.1109 19.2ZM11.0931 14.58H13.1854C13.1854 13.92 13.2562 13.4 13.398 13.02C13.5397 12.64 13.9401 12.12 14.5991 11.46C15.0891 10.94 15.4756 10.4448 15.7583 9.9744C16.041 9.504 16.1824 8.9392 16.1824 8.28C16.1824 7.16 15.796 6.3 15.0232 5.7C14.2503 5.1 13.3362 4.8 12.2806 4.8C11.2062 4.8 10.3342 5.1 9.66469 5.7C8.99516 6.3 8.52883 7.02 8.26569 7.86L10.1318 8.64C10.226 8.28 10.4383 7.89 10.7685 7.47C11.0987 7.05 11.6028 6.84 12.2806 6.84C12.8838 6.84 13.3362 7.0152 13.6377 7.3656C13.9393 7.716 14.0901 8.1008 14.0901 8.52C14.0901 8.92 13.977 9.2952 13.7508 9.6456C13.5246 9.996 13.2419 10.3208 12.9026 10.62C12.0733 11.4 11.5643 11.99 11.3758 12.39C11.1873 12.79 11.0931 13.52 11.0931 14.58ZM12.1675 24C10.603 24 9.13276 23.6848 7.75676 23.0544C6.38076 22.424 5.18383 21.5692 4.16596 20.49C3.1481 19.41 2.34248 18.14 1.74911 16.68C1.15573 15.22 0.858664 13.66 0.85791 12C0.85791 10.34 1.15498 8.78 1.74911 7.32C2.34324 5.86 3.14886 4.59 4.16596 3.51C5.18383 2.43 6.38076 1.5752 7.75676 0.9456C9.13276 0.316 10.603 0.0008 12.1675 0C13.732 0 15.2022 0.3152 16.5782 0.9456C17.9542 1.576 19.1512 2.4308 20.169 3.51C21.1869 4.59 21.9929 5.86 22.587 7.32C23.1812 8.78 23.4778 10.34 23.4771 12C23.4771 13.66 23.18 15.22 22.5859 16.68C21.9918 18.14 21.1861 19.41 20.169 20.49C19.1512 21.57 17.9542 22.4252 16.5782 23.0556C15.2022 23.686 13.732 24.0008 12.1675 24Z" fill="white" />
                            </svg>
                        </span> Help
                    </NavLink>
                </nav>
            </div>
            <button className="nav-link logout" onClick={handleLogout}>
                <span className="icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.4506 6.66667L16.6913 8.53333L18.7019 10.6667H8.39764V13.3333H18.7019L16.6913 15.4667L18.4506 17.3333L23.4771 12L18.4506 6.66667ZM3.37115 2.66667H12.1675V0H3.37115C1.98887 0 0.85791 1.2 0.85791 2.66667V21.3333C0.85791 22.8 1.98887 24 3.37115 24H12.1675V21.3333H3.37115V2.66667Z" fill="white" />
                </svg>
                </span> Logout
            </button>

            {/* Close button for mobile view */}
            <button className="close-sidebar" onClick={onClose}>
                âœ•
            </button>
        </aside>
    );
};

export default SideBar;
